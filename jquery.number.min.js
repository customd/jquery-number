(function(g){function q(a,b){if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveStart("character",a);c.moveEnd("character",b-a);c.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(a,b))}function r(a){var b=this.value.length;a="start"==a.toLowerCase()?"Start":"End";if(document.selection){var b=document.selection.createRange(),c;c=b.duplicate();c.expand("textedit");c.setEndPoint("EndToEnd",b);c=c.text.length-b.text.length;b=c+b.text.length;return"Start"==
a?c:b}"undefined"!=typeof this["selection"+a]&&(b=this["selection"+a]);return b}var v={188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45},w={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"};g.fn.number=function(a,b,c,n){n="undefined"===typeof n?",":n;c="undefined"===typeof c?".":c;b="undefined"===typeof b?0:b;var f="\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4),
p=RegExp("[^"+f+"0-9]","g"),s=RegExp(f,"g");return!0===a?this.is("input:text")?this.on({"keydown.format":function(d){var l=g(this),e=l.data("numFormat"),h=d.keyCode?d.keyCode:d.which,a="",k=r.apply(this,["start"]),f=r.apply(this,["end"]),m="",m=!1;v.hasOwnProperty(h)&&(h=v[h]);!d.shiftKey&&65<=h&&90>=h?h+=32:!d.shiftKey&&69<=h&&105>=h?h-=48:d.shiftKey&&w.hasOwnProperty(h)&&(a=w[h]);110===d.keyCode&&(a=c);""==a&&(a=String.fromCharCode(h));46===d.keyCode&&(a="");if(46!==h&&8!==h&&110!==h&&a!=c&&!a.match(/[0-9]/)){l=
d.keyCode?d.keyCode:d.which;if(46==l||8==l||9==l||27==l||13==l||(65==l||82==l)&&!0===(d.ctrlKey||d.metaKey)||(86==l||67==l)&&!0===(d.ctrlKey||d.metaKey)||35<=l&&39>=l)return;d.preventDefault();return!1}0==k&&f==this.value.length||0===l.val()&&!d.metaKey&&!d.ctrlKey&&!d.altKey&&1===a.length?(k=f=1,this.value="",e.init=0<b?-1:0,e.c=0<b?-(b+1):0,a==c&&0<b?(this.value="0"+c+Array(b+1).join("0"),k=f=2,q.apply(this,[2,2])):q.apply(this,[0,0])):e.c=f-this.value.length;if(0<b&&a==c&&k==this.value.length-
b-1)e.c++,e.init=Math.max(0,e.init),d.preventDefault(),m=this.value.length+e.c;else if(a==c)e.init=Math.max(0,e.init),d.preventDefault();else if(0<b&&8==h&&k==this.value.length-b)d.preventDefault(),e.c--,m=this.value.length+e.c;else if(0<b&&8==h&&k>this.value.length-b){if(""===this.value)return;"0"!=this.value.slice(k-1,k)&&(m=this.value.slice(0,k-1)+"0"+this.value.slice(k),l.val(m.replace(p,"").replace(s,c)));d.preventDefault();e.c--;m=this.value.length+e.c}else 8==h&&this.value.slice(k-1,k)==n?
(d.preventDefault(),e.c--,m=this.value.length+e.c):46===h?f===k&&(this.value.slice(k,k+1)==n&&(d.preventDefault(),e.c++),m=this.value.length+e.c):0<b&&(k==f&&this.value.length>b+1&&k>this.value.length-b-1&&isFinite(+a)&&!d.metaKey&&!d.ctrlKey&&!d.altKey&&1===a.length)&&(this.value=m=f===this.value.length?this.value.slice(0,k-1):this.value.slice(0,k)+this.value.slice(k+1),m=k);!1!==m&&q.apply(this,[m,m]);l.data("numFormat",e)},"keyup.format":function(d){var a=g(this),e=a.data("numFormat");d=d.keyCode?
d.keyCode:d.which;var c=r.apply(this,["start"]);""===this.value||(48>d||57<d)&&(96>d||105<d)&&8!==d&&46!==d||("boolean"===typeof e.init&&0===a.val()&&(e.init=0<b?-1:0,0<b&&(e.c=-b-1)),a.val(a.val()),"boolean"===typeof e.init&&0<this.value.length&&(e.init=0<b?1:0,e.c=c-this.value.length,0<b&&0<c&&e.c--),0<b?"number"===typeof e.init&&1>e.init?(c=this.value.length-b-(0>e.init?1:0),e.c=c-this.value.length,e.init=1,a.data("numFormat",e)):"boolean"===typeof e.init?(e.init=1,e.c=-b-1):c>this.value.length-
b&&8!=d&&46!=d?(e.c++,a.data("numFormat",e)):46==d&&c<this.value.length-b&&0<c&&this.value.slice(c-1,c)!=n&&e.c++:46==d&&(this.value.slice(c-1,c)!==n&&0<c)&&e.c++,a=this.value.length+e.c,q.apply(this,[a,a]))},"paste.format":function(b){var a=g(this),c=b.originalEvent,f=null;window.clipboardData&&window.clipboardData.getData?f=window.clipboardData.getData("Text"):c.clipboardData&&c.clipboardData.getData&&(f=c.clipboardData.getData("text/plain"));a.val(f);b.preventDefault();return!1}}).each(function(){var a=
g(this).data("numFormat",{c:-(b+1),decimals:b,thousands_sep:n,dec_point:c,regex_dec_num:p,regex_dec:s,init:!1});""!==this.value&&a.val(a.val())}):this.each(function(){var a=g(this),f=+a.text().replace(p,"").replace(s,".");a.number(isFinite(f)?+f:0,b,c,n)}):this.text(g.number.apply(window,arguments))};var t=null,u=null;g.isPlainObject(g.valHooks.text)?(g.isFunction(g.valHooks.text.get)&&(t=g.valHooks.text.get),g.isFunction(g.valHooks.text.set)&&(u=g.valHooks.text.set)):g.valHooks.text={};g.valHooks.text.get=
function(a){var b=g(a).data("numFormat");if(b){if(""===a.value)return"";a=+a.value.replace(b.regex_dec_num,"").replace(b.regex_dec,".");return""+(isFinite(a)?a:0)}if(g.isFunction(t))return t(a)};g.valHooks.text.set=function(a,b){var c=g(a).data("numFormat");if(c)return a.value=g.number(b,c.decimals,c.dec_point,c.thousands_sep);if(g.isFunction(u))return u(a,b)};g.number=function(a,b,c,g){g="undefined"===typeof g?",":g;c="undefined"===typeof c?".":c;b=isFinite(+b)?Math.abs(b):0;var f="\\u"+("0000"+
c.charCodeAt(0).toString(16)).slice(-4),p="\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4);a=(a+"").replace(".",c).replace(RegExp(p,"g"),"").replace(RegExp(f,"g"),".").replace(RegExp("[^0-9+-Ee.]","g"),"");a=isFinite(+a)?+a:0;f="";f=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};f=(b?f(a,b):""+Math.round(a)).split(".");3<f[0].length&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g));(f[1]||"").length<b&&(f[1]=f[1]||"",f[1]+=Array(b-f[1].length+1).join("0"));return f.join(c)}})(jQuery);